<div class="container">

  <div class="selected-variables first">
    <ual-variables-multi-select datasource="vm.datasource" selected-reference="vm.selectedsVariables"></ual-variables-multi-select>
  </div>

  <div class="add-btns">
      <div id="btn-add-aggregators" class="buttons" data-ng-mouseover="vm.showTooltip('btn-add-aggregators','Add to selected aggregators')" data-ng-mouseleave="vm.hideTooltip()">
        <ual-button class="-secondary" ng-click="vm.addAggregators()" ng-disabled="!vm.selectedsVariables.length"> > </ual-button>
      </div>
      <div id="btn-add-variables" class="buttons" data-ng-mouseover="vm.showTooltip('btn-add-variables','Add to selected variables')" data-ng-mouseleave="vm.hideTooltip()">
        <ual-button class="-secondary" ng-click="vm.addVariables()" ng-disabled="!vm.selectedsVariables.length"> Â» </ual-button>
      </div>
    </div>



  <div class="selected-variables">
    <ual-pane ual-title="Selected aggregators ({{vm.aggregators.get().length}})" action="Delete all" on-action="vm.deleteAll('aggregators', vm.aggregatorsFilter)" is-disabled="vm.aggregators.get().length == 0 || (vm.aggregators.get() && (vm.aggregators.get() | filterBy:vm.aggregatorsFilter | isEmpty))">
      <ual-input ual-id="selected-searchbox" class="search-box" value="vm.aggregatorsFilter.name" min-chars="3" icon="ion-ios-search-strong" ual-disabled="vm.dragging"></ual-input>
      <div class="empty-search" ng-hide="vm.aggregators.get().length == 0 || (vm.aggregators.get() | filterBy:vm.aggregatorsFilter).length > 0">
        <div>No results match your search</div>
      </div>
      <div class="empty-list" ng-hide="(vm.aggregators.get()).length > 0">
        <div>No aggregators selected yet.</div>
      </div>
      <ul id="aggregator-list" class="selected-list" ng-if="vm.aggregators.get().length > 0 && (vm.aggregators.get() | filterBy:vm.aggregatorsFilter).length > 0" ual-scroll
              ual-scroll-options="{ theme:'dark', callbacks:{ onScrollStart: vm.onScrollStart } }">
        <li class="selected-container" ng-repeat="item in vm.aggregators.get() | filterBy:vm.aggregatorsFilter  track by item.order" droppable id="{{ vm.itemPosition(item, vm.aggregators.get()) + 1 }}_selected_container-aggregator" drop="vm.onDrop('aggregators')" dragover="vm.scrollTo" bind="vm" ual-disabled="vm.scrolling" ng-class="{'last': $last, 'first': $first}">
          <ual-variable-selected-item variable-total="vm.aggregators.get().length" variable-item="item" variable-type="aggregator" variable-order="vm.itemPosition(item, vm.aggregators.get()) + 1" on-delete="vm.removeVariable(item, 'aggregators')" cb-change="vm.changeAggregatorOrder" draggable id="{{ vm.itemPosition(item, vm.aggregators.get()) + 1 }}_selected_item-aggregator" variable-type="aggregator" ng-class="{'-error': (vm.error_selected && vm.error_selected.id == item.id)}">
          </ual-variable-selected-item>
        </li>
      </ul>
    </ual-pane>
  </div>

  <div class="selected-variables">
    <ual-pane ual-title="Selected variables ({{vm.variables.get().length}})" action="Delete all" on-action="vm.deleteAll('variables', vm.selectedFilter)" is-disabled="vm.variables.get().length == 0 || (vm.variables.get() && (vm.variables.get() | filterBy:vm.selectedFilter | isEmpty))">
      <ual-input ual-id="selected-searchbox" class="search-box" value="vm.selectedFilter.name" min-chars="3" icon="ion-ios-search-strong" ual-disabled="vm.dragging"></ual-input>
      <div class="empty-search" ng-hide="vm.variables.get().length == 0 || (vm.variables.get() | filterBy:vm.selectedFilter).length > 0">
        <div>No results match your search</div>
      </div>
      <div class="empty-list" ng-hide="(vm.variables.get()).length > 0">
        <div>No variables selected yet.</div>
      </div>
      <ul id="variable-list" class="selected-list" ng-if="vm.variables.get().length > 0"  ual-scroll
              ual-scroll-options="{ theme:'dark', callbacks:{ onScrollStart: vm.onScrollStart } }">
        <li class="selected-container" ng-repeat="item in vm.variables.get() | filterBy:vm.selectedFilter track by item.order" droppable id="{{ vm.itemPosition(item) + 1 }}_selected_container-variable" drop="vm.onDrop('variables')" dragover="vm.scrollTo" bind="vm" ual-disabled="vm.scrolling" ng-class="{'last': $last, 'first': $first}">
          <ual-variable-selected-item variable-total="vm.variables.get().length" variable-item="item" variable-order="vm.itemPosition(item) + 1" on-delete="vm.removeVariable(item)" cb-change="vm.changeSelectedOrder" draggable id="{{ vm.itemPosition(item) + 1 }}_selected_item-variable" variable-type="variable" ng-class="{'-error': (vm.error_selected && vm.error_selected.id == item.id)}">
          </ual-variable-selected-item>
        </li>
      </ul>
    </ual-pane>
  </div>
</div>
