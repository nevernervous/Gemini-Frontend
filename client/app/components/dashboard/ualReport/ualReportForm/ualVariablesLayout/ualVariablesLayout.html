<div class="container">

  <div class="selected-variables first">
    <ual-variables-multi-select datasource="vm.datasource" selected-reference="vm.selectedsVariables"></ual-variables-multi-select>
  </div>

  <div class="add-btns">
    <div id="btn-add-aggregators" class="buttons" data-ng-mouseover="vm.showTooltip('btn-add-aggregators','Add to selected aggregators')" data-ng-mouseleave="vm.hideTooltip()">
      <ual-button class="-secondary" ng-click="vm.addAggregators()" ng-disabled="!vm.selectedsVariables.length"> > </ual-button>
    </div>
    <div id="btn-add-variables" class="buttons" data-ng-mouseover="vm.showTooltip('btn-add-variables','Add to selected variables')" data-ng-mouseleave="vm.hideTooltip()">
      <ual-button class="-secondary" ng-click="vm.addVariables()" ng-disabled="!vm.selectedsVariables.length"> Â» </ual-button>
    </div>
  </div>

  <div class="selected-variables">
    <ual-pane ual-title="Selected aggregators ({{vm.aggregatorsFiltered.length}})" action="Delete all" on-action="vm.deleteAllAggregators()" is-disabled="(vm.aggregatorsFiltered = (vm.aggregators.get() | visible:'name':vm._aggregators.filter | filter:{'_visible': true} )) | isEmpty">
      <ual-input ual-id="selected-searchbox" class="search-box" value="vm._aggregators.filter" min-chars="3" icon="ion-ios-search-strong" ual-disabled="vm.dragging || vm._aggregators.isempty"></ual-input>
      <div class="empty-search" ng-if="!vm._aggregators.isempty" ng-show="vm.aggregatorsFiltered | isEmpty">
        <div>No results found.</div>
      </div>
      <div class="empty-list" ng-if="vm._aggregators.isempty">
        <div>No aggregators selected yet.</div>
      </div>
      <ul id="aggregator-list" class="selected-list" ng-if="!vm._aggregators.isempty">
        <li class="selected-container" ng-repeat="item in vm.aggregators.get()" droppable id="{{ $index }}_selected_container-aggregator" drop="vm.onDropAggregators(from, to)" >
          <ual-variable-selected-item id="{{ $index }}_selected_item-aggregator" draggable ng-show="item._visible"
            variable-total="vm._aggregators.total" variable-item="item" variable-order="$index" variable-type="aggregator"
            on-delete="vm.deleteAggregator($index)" variable-change="vm.changeAggregators(oldOrder, newOrder)"
            ng-class="{'-error': (vm.error_selected && vm.error_selected.id == item.id)}">
          </ual-variable-selected-item>
        </li>
      </ul>
    </ual-pane>
  </div>

  <div class="selected-variables">
    <ual-pane ual-title="Selected variables ({{vm.variablesFiltered.length}})" action="Delete all" on-action="vm.deleteAllVariables()" is-disabled="(vm.variablesFiltered = (vm.variables.get() | visible:'name':vm._variables.filter | filter:{'_visible': true} )) | isEmpty">
      <ual-input ual-id="selected-searchbox" class="search-box" value="vm._variables.filter" min-chars="3" icon="ion-ios-search-strong" ual-disabled="vm.dragging || vm._variables.isempty"></ual-input>
      <div class="empty-search" ng-if="!vm._variables.isempty" ng-show="vm.variablesFiltered | isEmpty">
        <div>No results found.</div>
      </div>
      <div class="empty-list" ng-if="vm._variables.isempty">
        <div>No variables selected yet.</div>
      </div>
      <ul id="variable-list" class="selected-list" ng-if="!vm._variables.isempty">
        <li class="selected-container" ng-repeat="item in vm.variables.get()" droppable id="{{ $index }}_selected_container-variable" drop="vm.onDropVariables(from, to)" >
          <ual-variable-selected-item id="{{ $index }}_selected_item-variable" draggable ng-show="item._visible"
            variable-total="vm._variables.total" variable-item="item" variable-order="$index" variable-type="variable"
            on-delete="vm.deleteVariable($index)" variable-change="vm.changeVariables(oldOrder, newOrder)"
            ng-class="{'-error': (vm.error_selected && vm.error_selected.id == item.id)}">
          </ual-variable-selected-item>
        </li>
      </ul>
    </ual-pane>
  </div>
</div>
