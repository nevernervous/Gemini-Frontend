<ng-form flex
  layout="row"
  name="filterCondition"
  class="wrapper"
  ng-class="{'-error': filterCondition.$dirty && !filterCondition.$valid}"
  novalidate>
  <!--  LABEL -->
  <div class="operator">{{vm.operatorGroup.operator}}</div>

  <!-- VARIABLE -->
  <ual-autocomplete class="ual-autocomplete"
    name="variable"
    placeholder="Search for variable"
    input-width="240px"
    ng-required="filterCondition.$submitted"
    items="vm.availableVariables"
    item-selected="vm.condition.variable"
    item-property="name"
    errors="filterCondition.variable.$error">
    <div ng-messages-include="default-messages"></div>
  </ual-autocomplete>

  <!-- OPERATOR -->
  <md-select class="ual-select"
    ng-model="vm.condition.operator"
    ng-model-options="{trackBy: '$value.operator'}">
    <md-option ng-repeat="operator in vm.operatorsList" ng-value="{{operator}}" >
      {{operator.operator}}
    </md-option>
  </md-select>

  <!-- TYPE -->
  <md-select class="ual-select"
    ng-if="!vm.disableAsignation"
    ng-model="vm.condition.type">
    <md-option ng-repeat="type in vm.types" value="{{type}}" >
      {{type}}
    </md-option>
  </md-select>

  <!-- VALUE / PRIMARY -->
  <md-input-container class="condition-value"
    ng-if="vm.condition.type == 'Value' && !vm.disableAsignation"
    ual-input ual-input-size="medium" >
    <input name="value"
      aria-label="first value condition"
      ng-disabled="!vm.condition.variable"
      placeholder="{{ vm.getPlaceholder() }}"
      ng-model="vm.condition.value"
      ng-model-options="{ updateOn: 'blur' }"
      ng-blur="vm.trim($event, vm.condition.value)"
      ng-required="filterCondition.$submitted"
      reg-ex="{{vm.condition.variable.regEx}}"
      accept-commas="{{vm.acceptCommas}}"
      ual-multiple-values
      ual-pattern
      ual-date-validator
      second-date="{{vm.condition.secondValue}}"
      datatype="{{vm.condition.variable.dataType}}"
      maxlength="{{vm.condition.variable.dataType === 'Date' ? 10 : null }}">
      <ng-messages ng-if="!!vm.condition.variable && vm.condition.variable.dataType === 'String' && filterCondition.$dirty"
          for="filterCondition.value.$error">
        <div ng-messages-include="text-messages"></div>
      </ng-messages>
      <ng-messages ng-if="!!vm.condition.variable && vm.condition.variable.dataType === 'Number' && filterCondition.$dirty"
          for="filterCondition.value.$error">
        <div ng-messages-include="number-messages"></div>
      </ng-messages>
      <ng-messages ng-if="!!vm.condition.variable && vm.condition.variable.dataType === 'Date' && filterCondition.$dirty"
          for="filterCondition.value.$error">
        <div ng-messages-include="date-messages"></div>
      </ng-messages>
      <ng-messages ng-if="!!vm.condition.variable && filterCondition.$dirty"
          for="filterCondition.value.$error">
        <div ng-messages-include="multiple-values"></div>
      </ng-messages>
      <ng-messages ng-if="filterCondition.$dirty"
          for="filterCondition.value.$error">
        <div ng-messages-include="default-messages"></div>
      </ng-messages>
  </md-input-container>
  <!-- VALUE / SECONDARY -->
  <md-input-container class="condition-value"
    ng-if="!vm.disableAsignation && vm.extraField && vm.condition.type == 'Value' && vm.condition.operator.operator != '='"
    ual-input ual-input-size="medium" >
    <input name="secondValue"
      aria-label="first value condition"
      ng-disabled="!vm.condition.variable"
      placeholder="{{ vm.getPlaceholder() }}"
      ng-model="vm.condition.secondValue"
      ng-model-options="{ updateOn: 'blur' }"
      ng-blur="vm.trim($event, vm.condition.secondValue)"
      ng-required="filterCondition.$submitted"
      reg-ex="{{vm.condition.variable.regEx}}"
      placeholder="{{ vm.getPlaceholder() }}"
      accept-commas="{{vm.acceptCommas}}"
      ual-multiple-values
      ual-pattern
      ual-date-validator
      datatype="{{vm.condition.variable.dataType}}"
      maxlength="{{vm.condition.variable.dataType === 'Date' ? 10 : null }}">
      <ng-messages ng-if="!!vm.condition.variable && vm.condition.variable.dataType === 'String' && filterCondition.$dirty"
              for="filterCondition.secondValue.$error">
        <div ng-messages-include="text-messages"></div>
      </ng-messages>
      <ng-messages ng-if="!!vm.condition.variable && vm.condition.variable.dataType === 'Number' && filterCondition.$dirty"
              for="filterCondition.secondValue.$error">
        <div ng-messages-include="number-messages"></div>
      </ng-messages>
      <ng-messages ng-if="!!vm.condition.variable && vm.condition.variable.dataType === 'Date' && filterCondition.$dirty"
          for="filterCondition.secondValue.$error">
        <div ng-messages-include="date-messages"></div>
      </ng-messages>
      <ng-messages ng-if="!!vm.condition.variable && filterCondition.$dirty"
          for="filterCondition.secondValue.$error">
        <div ng-messages-include="multiple-values"></div>
      </ng-messages>
      <ng-messages ng-if="filterCondition.$dirty"
              for="filterCondition.secondValue.$error">
        <div ng-messages-include="default-messages"></div>
      </ng-messages>
  </md-input-container>

  <!-- VARIABLE / PRIMARY -->
  <ual-autocomplete ng-if="vm.condition.type == 'Variable' && !vm.disableAsignation"
    class="condition-value"
    placeholder="Search for variable"
    input-width="240px"
    ng-required="filterCondition.$submitted"
    items="vm.filteredAvaiableVariables"
    item-selected="vm.condition.value"
    item-property="name"
    errors="filterCondition.variable.$error">
    <div ng-messages-include="default-messages"></div>
  </ual-autocomplete>
  <!-- VARIABLE / SECONDARY -->
  <ual-autocomplete ng-if="vm.extraField && vm.condition.type == 'Variable' && vm.condition.operator.operator != '='"
    class="condition-value"
    placeholder="Search for variable"
    input-width="240px"
    ng-required="filterCondition.$submitted"
    items="vm.filteredAvaiableVariables"
    item-selected="vm.condition.secondValue"
    item-property="name"
    errors="filterCondition.variable.$error">
    <div ng-messages-include="default-messages"></div>
  </ual-autocomplete>

  <!-- REMOVE -->
  <ual-button-flat ual-button-flat-icon="ion-android-close"
    arial-label="Remove"
    ng-href="vm.removeCondition()">
  </ual-button-flat>
</ng-form>
