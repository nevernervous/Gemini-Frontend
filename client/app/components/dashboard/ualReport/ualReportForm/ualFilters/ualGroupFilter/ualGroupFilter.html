<div flex
  ng-class="vm.parentOperator.operator.toLowerCase()">
  <div class="operator"
    ng-if="vm.parentOperator">
    {{vm.parentOperator.operator}}
  </div>
  <div layout="column"
    class="-tree-container" ng-class="vm.getGroupClass()">
    <div layout="row"
      class="-toolbar">
      <span class="-not-button"
        ng-class="{checked:vm.filters.not}">
        <ual-checkbox on-click="vm.toggle()"
          is-checked="vm.filters.not">
          Not
        </ual-checkbox>
      </span>
      <md-select class="ual-select select-operators"
        ng-model="vm.filters.operator"
        ng-model-options="{trackBy: '$value.operator'}">
        <md-option ng-repeat="condition in vm.conditionList" ng-value="{{condition}}" >
          {{condition.operator}}
        </md-option>
      </md-select>
      <ual-button-flat ual-button-flat-icon="ion-android-add"
        arial-label="Add limit condition"
        ng-href="vm.addChildren()">
        Add limit condition
      </ual-button-flat>
      <ual-button-flat ual-button-flat-icon="ion-android-add"
        arial-label="Add limit condition group"
        ng-href="vm.addGroup()">
        Add limit condition group
      </ual-button-flat>
      <ual-button-flat ual-button-flat-icon="ion-android-close"
        class="-root-action"
        arial-label="Remove All"
        ng-href="vm.cleanGroup($event)"
        ng-disabled="(vm.filters.children|isEmpty)">
        Remove All
      </ual-button-flat>
      <ual-button-flat ual-button-flat-icon="ion-android-close"
        class="-no-root-action"
        arial-label="Remove Group"
        ng-href="vm.removeParent()">
        Remove Group
      </ual-button-flat>
      <ual-button-flat ual-button-flat-icon="ion-ios-trash-outline"
        class="-root-action"
        arial-label="Reset All"
        ng-href="vm.resetAll($event)"
        ng-disabled="!vm.resetEnable" >
        Reset All
      </ual-button-flat>
    </div>
    <div layout="columns" layout-fill
      class="-conditions">
      <div flex layout="row" layout-align="center center"
        class="-no-conditions"
        ng-if="vm.filters.children|isEmpty">
        <span>No limits applied</span>
      </div>
      <div layout="column" layout-fill
        ng-if="!(vm.filters.children|isEmpty)">
        <ul ng-if="!(vm.filters.children|isEmpty)">
          <li ng-repeat="child in vm.filters.children track by $index"
          class="-iterative-container">
            <ual-group-filter layout="row" layout-fill
              ng-if="!!child.children"
              available-variables="vm.availableVariables"
              filters="child"
              remove-parent="vm.removeGroup($index)"
              parent-operator="vm.filters.operator"
              datasource="vm.datasource"
              ng-class="vm.getGroupClass()">
            </ual-group-filter>
            <ual-filter-condition layout="row" layout-fill
              ng-if="!child.children"
              available-variables="vm.availableVariables"
              condition="child"
              operator-group="vm.filters.operator"
              remove-condition="vm.removeItem($index)"
              datasource="vm.datasource">
            </ual-filter-condition>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
